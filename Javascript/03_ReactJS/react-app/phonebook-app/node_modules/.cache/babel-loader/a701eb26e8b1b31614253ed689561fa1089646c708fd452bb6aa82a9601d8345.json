{"ast":null,"code":"import _slicedToArray from\"/home/marc/Documents/Private/01_Programming/Javascript/Javascript/03_ReactJS/react-app/phonebook-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _this=this;import{useState,useEffect}from\"react\";import axios from'axios';import Contact from'./components/Contact';import serverService from'./components/server';import Notification from'./components/Error';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contacts=_useState2[0],setContacts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newContact=_useState4[0],setNewContact=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),className=_useState10[0],setClassName=_useState10[1];useEffect(function(){serverService.getAll().then(function(response){setContacts(response.data);});},[]);var addContact=function addContact(event){event.preventDefault();var lastContact=contacts.at(-1).id;var personObject={name:newContact,number:newNumber,id:lastContact+1};var alreadyContact=contacts.filter(function(contact){return contact.name===personObject.name;});if(alreadyContact.length===0){serverService.create(personObject).catch(function(error){console.log(error.response.data.error);setErrorMessage(\"Contact \".concat(personObject.name,\" could not be added, due to invalid number or name.\"));setClassName('error');}).then(function(response){setContacts(contacts.concat(response.data));setNewContact('');setNewNumber('');setErrorMessage(\"Added User \".concat(personObject.name));setClassName('add');});setTimeout(function(){setErrorMessage(null);},5000);}else{var response=window.confirm(\"\".concat(personObject.name,\" is already added to phonebook, replace the old number with a new one?\"));if(response!==null){serverService.update(alreadyContact[0].id,personObject).catch(function(error){console.log(error.response.data.error);setErrorMessage(\"\".concat(personObject.name,\" got invalid number: \").concat(personObject.number,\". Please use following format: XXX-XXX-XXXX only.\"));setClassName('error');});setTimeout(function(){setErrorMessage(null);},5000);serverService.getAll().then(function(response){setContacts(response.data);});}}setNewContact('');setNewNumber('');};var deleteContact=function deleteContact(props){var response=window.confirm(\"Remove user \".concat(props.name,\"?\"));if(response!==null){serverService.remove(props.id).then(function(response){console.log(response.data);setContacts(response.data);}).catch(function(error){setErrorMessage(\"User \".concat(props.name,\" has already been removed from server\"));setClassName('error');setTimeout(function(){setErrorMessage(null);},5000);});setContacts(contacts.filter(function(contact){return contact.id!==props.id;}));}};var handleContactChange=function handleContactChange(event){setNewContact(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:errorMessage,classCSS:className}),/*#__PURE__*/_jsx(\"h1\",{children:\"Add a New Contact\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addContact,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name:\",/*#__PURE__*/_jsx(\"input\",{value:newContact,onChange:handleContactChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number:\",/*#__PURE__*/_jsx(\"input\",{value:newNumber,onChange:handleNumberChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Contact Overview\"}),/*#__PURE__*/_jsx(\"u\",{children:contacts.map(function(contact,id){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Contact,{id:contact.id,name:contact.name,number:contact.number}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteContact.bind(_this,contact),children:\"delete\"})]},id);})})]});};export default App;","map":{"version":3,"names":["useState","useEffect","axios","Contact","serverService","Notification","App","contacts","setContacts","newContact","setNewContact","newNumber","setNewNumber","errorMessage","setErrorMessage","className","setClassName","getAll","then","response","data","addContact","event","preventDefault","lastContact","at","id","personObject","name","number","alreadyContact","filter","contact","length","create","catch","error","console","log","concat","setTimeout","window","confirm","update","deleteContact","props","remove","handleContactChange","target","value","handleNumberChange","map","bind"],"sources":["/home/marc/Documents/Private/01_Programming/Javascript/Javascript/03_ReactJS/react-app/phonebook-app/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from 'axios'\nimport Contact from './components/Contact'\nimport serverService from './components/server'\nimport Notification from './components/Error'\n\nconst App = () =>{\n    const [contacts, setContacts] = useState([])\n    const[newContact, setNewContact] = useState('')\n    const[newNumber, setNewNumber] = useState('')\n    const [errorMessage, setErrorMessage] = useState('')\n    const [className, setClassName] = useState('')\n\n    useEffect(()=>{\n        serverService \n          .getAll()\n          .then(response=>{\n            setContacts(response.data)\n          })\n      },[])\n\n    const addContact = (event) => {\n    event.preventDefault()\n\n    const lastContact = contacts.at(-1).id\n\n    const personObject = {\n      name: newContact,\n      number: newNumber,\n      id: lastContact + 1\n    }\n\n    const alreadyContact = contacts.filter(contact => contact.name === personObject.name)\n    \n    if (alreadyContact.length === 0) {\n      serverService\n        .create(personObject)\n        .catch(error=>{\n            console.log(error.response.data.error)\n            setErrorMessage(`Contact ${personObject.name} could not be added, due to invalid number or name.`)\n            setClassName('error')\n            })\n        .then(response =>{\n          setContacts(contacts.concat(response.data))\n          setNewContact('')\n          setNewNumber('')\n        setErrorMessage(`Added User ${personObject.name}`)\n        setClassName('add')\n        })\n\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n    } else {\n      const response = window.confirm(`${personObject.name} is already added to phonebook, replace the old number with a new one?`)\n      if (response !== null) {\n        serverService\n          .update(alreadyContact[0].id, personObject)\n              .catch(error=>{\n                  console.log(error.response.data.error)\n                  setErrorMessage(`${personObject.name} got invalid number: ${personObject.number}. Please use following format: XXX-XXX-XXXX only.`)\n                  setClassName('error')\n              })\n\n          setTimeout(()=>{\n              setErrorMessage(null)\n          },5000)\n\n        serverService \n          .getAll()\n          .then(response=>{\n            setContacts(response.data)\n          })\n      }\n    }\n    \n    setNewContact('')\n    setNewNumber('')\n  }\n  \n\n  const deleteContact = (props) => {\n    \n    const response = window.confirm(`Remove user ${props.name}?`)\n    if (response !== null) {\n      serverService\n        .remove(props.id)\n        .then(response=>{\n          console.log(response.data);\n          setContacts(response.data)\n        })\n        .catch( error =>{\n          setErrorMessage(`User ${props.name} has already been removed from server`)\n          setClassName('error')\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n\n        setContacts(contacts.filter(contact => contact.id !== props.id) )\n    } \n\n    \n  }\n\n  const handleContactChange = (event) =>{\n    setNewContact(event.target.value)\n  }\n\n  const handleNumberChange = (event) =>{\n    setNewNumber(event.target.value)\n  }\n  \n\n  return(\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={errorMessage} classCSS={className}/>\n      <h1>Add a New Contact</h1>\n      <form onSubmit={addContact}>\n        <div>\n          name:<input \n            value={newContact}\n            onChange={handleContactChange}\n            />\n        </div>\n        <div>\n        number:<input \n          value={newNumber}\n          onChange={handleNumberChange}\n          />\n        </div>\n        <button type=\"submit\">add</button>\n      </form>\n      <h1>Contact Overview</h1>\n      <u>\n        {\n          contacts.map((contact,id) =>(\n            <div key={id}>\n              <Contact \n                id={contact.id}\n                name={contact.name}\n                number={contact.number}\n                />\n              <button onClick={deleteContact.bind(this, contact)}>\n                delete\n              </button>\n            </div>\n          ))\n        }\n      </u>\n    </div>\n  )\n\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}